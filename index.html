<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>물리1 (비상) 3단원 - 파동과 정보통신 (1-53번)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f4f8;
        }
        .quiz-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 1.5rem;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .question-card {
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        .question-text {
            font-size: 1.1rem;
            font-weight: 500;
            color: #2d3748;
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        .question-text .blank-emphasis { 
            font-weight: bold;
            color: #3b82f6; 
        }
        .option-label {
            display: block;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
            background-color: #f7fafc;
        }
        .option-label:hover {
            background-color: #e2e8f0;
        }
        .option-input:checked + .option-label {
            background-color: #4299e1;
            color: white;
            border-color: #2b6cb0;
        }
        .feedback {
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 6px;
            font-size: 0.95rem;
        }
        .feedback.correct {
            background-color: #c6f6d5;
            color: #2f855a;
            border: 1px solid #9ae6b4;
        }
        .feedback.incorrect {
            background-color: #fed7d7;
            color: #c53030;
            border: 1px solid #fbb6ce;
        }
        .explanation {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #4a5568;
            line-height: 1.5;
        }
        .action-button {
            background-color: #4a5568;
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            border: none;
            margin-top: 1rem;
            margin-right: 0.5rem;
        }
        .action-button:hover:not(:disabled) {
            background-color: #2d3748;
        }
        .action-button:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
        }
        .pagination-controls {
            display: flex; 
            justify-content: center;
            align-items: center;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .pagination-controls button, .pagination-controls span {
            margin: 0 0.25rem;
            padding: 0.5rem 0.75rem;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            background-color: #fff;
            cursor: pointer;
        }
        .pagination-controls button:disabled {
            background-color: #e2e8f0;
            cursor: not-allowed;
            opacity: 0.7;
        }
        .pagination-controls .page-number.current {
            background-color: #4299e1;
            color: white;
            border-color: #2b6cb0;
            font-weight: bold;
        }
        .score-section {
            margin-top: 1.5rem;
            padding: 1.5rem; 
            background-color: #e9f5ff;
            border-radius: 8px;
            text-align: left;
        }
        .score-text {
            font-size: 1.1rem;
            font-weight: 500;
            color: #1a202c;
            margin-bottom: 0.5rem;
        }
        .quiz-title-in-score {
            font-size: 1.1rem; 
            font-weight: bold;
            color: #1e40af; 
            margin-bottom: 0.75rem; 
        }
        .motivational-quote { 
            font-size: 1rem;
            font-style: italic;
            color: #374151; 
            margin-top: 1.5rem; 
            padding-top: 1rem;
            border-top: 1px dashed #cbd5e0; 
            text-align: center;
        }
        h1 { 
            font-size: 1.8rem;
            font-weight: 700;
            color: #1a202c;
            text-align: center;
            margin-bottom: 1.5rem;
        }
        .page-info {
            text-align: center;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #4a5568;
        }

        /* 팝업 스타일 */
        .popup-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.6); display: flex;
            justify-content: center; align-items: center; z-index: 1000; 
            opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .popup-overlay.show { opacity: 1; visibility: visible; }
        .popup-content {
            background-color: white; padding: 2.5rem; border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25); text-align: center;
            max-width: 420px; width: 90%;
        }
        .popup-content h2 {
            font-size: 1.75rem; font-weight: 700; color: #1a202c; margin-bottom: 1rem;
        }
        .popup-content p.welcome-message {
            font-size: 1rem; color: #4a5568; margin-bottom: 1.5rem; line-height: 1.6;
        }
        .popup-password-input {
            width: 100%; padding: 0.75rem; margin-bottom: 1rem;
            border: 1px solid #cbd5e0; border-radius: 6px; font-size: 1rem;
            box-sizing: border-box; 
        }
        .popup-confirm-btn {
            background-color: #3b82f6; color: white; padding: 0.75rem 1.5rem;
            border-radius: 8px; font-weight: 500; cursor: pointer;
            transition: background-color 0.2s; border: none; width: 100%;
            font-size: 1rem;
        }
        .popup-confirm-btn:hover { background-color: #2563eb; }
        .popup-error-message {
            color: #ef4444; font-size: 0.875rem; margin-top: 0.75rem;
            min-height: 1.25rem; 
        }
    </style>
</head>
<body>
    <div id="welcome-popup" class="popup-overlay">
        <div class="popup-content">
            <h2>Appia 과학학원</h2>
            <p class="welcome-message">유선종 선생님의 학습 자료입니다.<br>비밀번호를 입력해주세요.</p>
            <input type="password" id="popup-password" class="popup-password-input" placeholder="비밀번호">
            <button id="popup-confirm" class="popup-confirm-btn">확인</button>
            <p id="popup-error" class="popup-error-message"></p>
        </div>
    </div>
    <div class="quiz-container">
        <h1>물리1 (비상) 3단원 - 파동과 정보통신 (1-53번)</h1>
        <div class="page-info" id="page-info"></div>
        <div id="quiz">
            </div>
        <div class="pagination-controls" id="pagination-controls">
            </div>
        <button id="submit-page-btn" class="action-button w-full sm:w-auto mx-auto block">이번 페이지 채점하기</button>
        <div class="score-section" id="score-section" style="display: none;">
            <p class="score-text quiz-title-in-score" id="quiz-main-title-in-score"></p> 
            <p class="score-text" id="current-page-score-text"></p>
            <p class="score-text" id="total-score-text"></p>
            <p class="motivational-quote" id="motivational-quote" style="display: none;"></p> 
        </div>
    </div>

    <script>
        // 문제 데이터 (PDF "물리(비상)-3단원.pdf" 기준)
        const questions = [
            {
                id: 1, type: 'fill-in', text: "1. 위상이 같은 인접한 두 지점 사이의 거리를 (   )이라 한다.",
                answer: "파장", options: ["주기", "진폭", "파장", "진동수"],
                explanation: "파장은 파동에서 같은 위상을 가진 이웃한 두 점 사이의 거리입니다. 예를 들어, 파동의 마루와 다음 마루 사이의 거리, 또는 골과 다음 골 사이의 거리입니다."
            },
            {
                id: 2, type: 'fill-in', text: "2. 매질이 한 번 진동하는 데 걸린 시간을 (   )라고 한다.",
                answer: "주기", options: ["파장", "진동수", "속력", "주기"],
                explanation: "주기는 파동의 매질이 한 번 완전하게 진동하는 데 걸리는 시간을 의미합니다. 단위는 초(s)를 사용합니다."
            },
            {
                id: 3, type: 'fill-in', text: "3. 매질의 한 점이 1초 동안 진동한 횟수를 (   )라고 한다.",
                answer: "진동수", options: ["주기", "파장", "진동수", "진폭"],
                explanation: "진동수는 매질의 한 점이 1초 동안 진동하는 횟수를 나타내며, 단위는 헤르츠(Hz)를 사용합니다."
            },
            {
                id: 4, type: 'fill-in', text: "4. 진동수의 단위는 (   )이다.",
                answer: "헤르츠", options: ["미터", "초", "헤르츠", "데시벨"],
                explanation: "진동수의 단위는 헤르츠(Hz)이며, 1Hz는 1초에 1번 진동하는 것을 의미합니다."
            },
            {
                id: 5, type: 'fill-in', text: "5. 주기와 진동수는 서로 (   )관계이다.",
                answer: "역수", options: ["비례", "반비례", "역수", "제곱"],
                explanation: "주기(T)와 진동수(f)는 서로 역수 관계입니다. 즉, T = 1/f 또는 f = 1/T 입니다."
            },
            {
                id: 6, type: 'fill-in', text: "6. 파동의 속력이 일정할 때 진동수가 클수록 파장이 (   )",
                answer: "짧아진다", options: ["길어진다", "짧아진다", "변하지 않는다", "알 수 없다"],
                explanation: "파동의 속력(v), 파장(λ), 진동수(f) 사이에는 v = fλ 관계가 있습니다. 속력이 일정할 때 진동수가 크면 파장은 짧아집니다."
            },
            {
                id: 7, type: 'fill-in', text: "7. 진동수가 일정할 때 파동의 속력이 빠를수록 파장이 (   )",
                answer: "길다", options: ["짧다", "길다", "변하지 않는다", "알 수 없다"],
                explanation: "파동의 기본 관계식 v = fλ에서 진동수(f)가 일정할 때 파동의 속력(v)이 빠를수록 파장(λ)은 길어집니다."
            },
            {
                id: 8, type: 'fill-in', text: "8. 같은 재질의 줄일 때에는 (   )줄 보다 (   )줄에서 속력이 더 빠르다.",
                answer: "굵은;가는", options: ["가는;굵은", "짧은;긴", "굵은;가는", "긴;짧은"],
                explanation: "같은 재질의 줄에서 파동의 속력은 줄의 장력과 선밀도에 따라 달라집니다. 일반적으로, 같은 장력일 때 가는 줄일수록 선밀도가 작아 파동의 속력이 더 빠릅니다. (문제의 빈칸 순서에 유의)"
            },
            {
                id: 9, type: 'fill-in', text: "9. 피아노 건반 '라' 음의 진동수는 440Hz이다. 이 건반을 눌렀을 때 소리의 파장은 몇 m인가? (단, 공기중에서 소리의 속력은 340m/s) (   )",
                answer: "약 0.773m", options: ["약 1.29m", "약 0.773m", "149600m", "440m"],
                explanation: "파동의 속력(v) = 진동수(f) × 파장(λ) 관계식에서 λ = v/f 입니다. 따라서 파장은 340m/s ÷ 440Hz ≈ 0.7727m, 약 0.773m 입니다."
            },
            {
                id: 10, type: 'fill-in', text: "10. 파동이 진행할 때 속력이 다른 매질의 경계면에서 진행방향이 변하는 것을 (   )이라고 한다.",
                answer: "파동의 굴절", options: ["파동의 반사", "파동의 회절", "파동의 간섭", "파동의 굴절"],
                explanation: "파동의 굴절은 파동이 한 매질에서 속력이 다른 다른 매질로 진행할 때 경계면에서 진행 방향이 꺾이는 현상입니다."
            },
            {
                id: 11, type: 'fill-in', text: "11. 입사각과 굴절각의 사인값의 비는 항상 (   )",
                answer: "일정하다", options: ["증가한다", "감소한다", "일정하다", "0이다"],
                explanation: "빛이 한 매질에서 다른 매질로 굴절할 때, 입사각(i)과 굴절각(r)의 사인값의 비(sin i / sin r)는 두 매질의 굴절률에 따라 항상 일정한 값을 가집니다. 이를 스넬의 법칙이라고 합니다."
            },
            {
                id: 12, type: 'fill-in', text: "12. 물의 굴절률 > 공기의 굴절률이기 때문에 입사각 (   ) 굴절각",
                answer: "<", options: ["<", ">", "=", "≤"],
                explanation: "빛이 굴절률이 큰 매질(물)에서 굴절률이 작은 매질(공기)로 진행할 때는 입사각보다 굴절각이 커집니다. 즉, 입사각 < 굴절각 입니다. (문맥상 물에서 공기로 진행하는 경우로 해석)"
            },
            {
                id: 13, type: 'fill-in', text: "13. 밀도가 클수록 파동의 속력은 (   ) 때문에 빛이 (   )으로 꺾여 진행되고, 이는 (   )의 원리이다.",
                answer: "느리기;아래쪽;신기루", options: ["빠르기;위쪽;도플러효과", "느리기;아래쪽;신기루", "일정하기;직진;그림자", "변하기;분산;무지개"],
                explanation: "일반적으로 공기 밀도가 클수록(온도가 낮을수록) 빛의 속력은 느려집니다. 지표면이 매우 뜨거워 아래쪽 공기 밀도가 작고 위쪽 공기 밀도가 크면, 위에서 오는 빛이 아래쪽으로 진행하면서 밀도가 작은 쪽(더운 공기 쪽)으로 휘어져 마치 물웅덩이가 있는 것처럼 보이는 신기루가 생깁니다. 문제에서 '빛이 아래쪽으로 꺾여 진행'된다고 하였으므로, 위쪽 공기가 더 뜨겁고 아래쪽 공기가 더 차가운 경우(예: 차가운 도로 위의 아지랑이)를 상정한 것으로 보입니다. 이 경우 위쪽(밀도 작음, 속력 빠름)에서 아래쪽(밀도 큼, 속력 느림)으로 빛이 꺾입니다."
            },
            {
                id: 14, type: 'fill-in', text: "14. 렌즈는 (   )을 이용한 예이다.",
                answer: "빛의 굴절", options: ["빛의 반사", "빛의 회절", "빛의 간섭", "빛의 굴절"],
                explanation: "렌즈는 빛이 서로 다른 매질(공기와 렌즈)의 경계면을 통과할 때 굴절하는 현상을 이용하여 빛을 모으거나 퍼뜨리는 광학 장치입니다."
            },
            {
                id: 15, type: 'fill-in', text: "15. 오목렌즈는 가운데보다 주변부가 (   ), (   )으로 빛이 퍼진다. 또 (   )을 교정할 때 쓰인다.",
                answer: "두껍고;바깥쪽;근시안", options: ["얇고;안쪽;원시안", "두껍고;바깥쪽;근시안", "평평하고;직진;난시안", "볼록하고;모이는;노안"],
                explanation: "오목렌즈는 중앙부가 주변부보다 얇고, 빛을 바깥쪽으로 퍼뜨리는(발산시키는) 성질이 있습니다. 눈의 수정체가 빛을 너무 강하게 굴절시켜 망막 앞에 상이 맺히는 근시안을 교정하는 데 사용됩니다. (주변부가 두껍다는 표현은 맞습니다.)"
            },
            {
                id: 16, type: 'fill-in', text: "16. 볼록렌즈는 주변보다 가운데 부분이 (   ), (   )으로 빛이 모인다. 또 (   )을 교정할 때 쓰인다.", 
                answer: "두껍고;안쪽으로;원시안", options: ["얇고;바깥쪽;근시안", "두껍고;안쪽으로;원시안", "평평하고;직진;정상안", "오목하고;퍼지는;노안"],
                explanation: "볼록렌즈는 중앙부가 주변부보다 두껍고, 빛을 안쪽으로 모으는(수렴시키는) 성질이 있습니다. 눈의 수정체가 빛을 충분히 굴절시키지 못해 망막 뒤에 상이 맺히는 원시안이나 노안을 교정하는 데 사용됩니다."
            },
            {
                id: 17, type: 'fill-in', text: "17. 공기 중에서 다이아몬드로 진행하는 빛이 굴절하는 이유를 빛의 속력과 관련지어 설명하시오. (   )",
                answer: "공기 중에서보다 다이아몬드 내에서 빛의 속력이 작기 때문에 공기 중에서 다이아몬드로 빛이 진행하면서 입사각보다 더 작은 각도로 굴절한다.", 
                options: [
                    "공기 중에서보다 다이아몬드 내에서 빛의 속력이 크기 때문에 굴절한다.", 
                    "공기 중에서보다 다이아몬드 내에서 빛의 속력이 작기 때문에 공기 중에서 다이아몬드로 빛이 진행하면서 입사각보다 더 작은 각도로 굴절한다.",
                    "빛이 다이아몬드 표면에서 반사되기 때문에 굴절한다.",
                    "다이아몬드가 투명하기 때문에 빛이 통과하면서 굴절한다."
                ],
                explanation: "빛은 매질에 따라 진행 속력이 다릅니다. 공기 중에서보다 다이아몬드 내에서 빛의 속력이 느려지기 때문에, 빛이 공기에서 다이아몬드로 입사할 때 법선 쪽으로 꺾여 입사각보다 굴절각이 작아집니다."
            },
            {
                id: 18, type: 'fill-in', text: "18. 굴절률이 (   ) 매질에서 (   ) 매질로 빛이 진행할 때 입사각이 임계각보다 (   ) 전반사된다.<br>- 전반사현상 예시 4가지를 쓰시오. (   )",
                answer: "큰;작은;크면;수족관의 물고기가 수면에 비쳐 보인다/레이저 빛이 프리즘에 입사된 후 되돌아 나온다./휘어진 광섬유의 끝에서 레이저 빛이 보인다./레이저 빛이 물줄기를 따라 진행된다.", 
                options: [
                    "작은;큰;작으면;예시1/예시2/예시3/예시4", 
                    "큰;작은;크면;수족관의 물고기가 수면에 비쳐 보인다/레이저 빛이 프리즘에 입사된 후 되돌아 나온다./휘어진 광섬유의 끝에서 레이저 빛이 보인다./레이저 빛이 물줄기를 따라 진행된다.", 
                    "같은;같은;같으면;예시5/예시6/예시7/예시8",
                    "큰;작은;작으면;예시9/예시10/예시11/예시12"
                ],
                explanation: "전반사는 빛이 굴절률이 큰 매질에서 굴절률이 작은 매질로 진행할 때, 입사각이 특정 각도(임계각)보다 커지면 빛이 굴절하지 않고 모두 반사되는 현상입니다. 예시로는 광섬유, 물속에서 수면을 볼 때 물체가 비쳐 보이는 현상 등이 있습니다."
            },
            {
                id: 19, type: 'fill-in', text: "19. 광섬유는 (   )을 전송하는 섬유 모양의 유리관이다.<br>- 광통신의 과정에 대해 설명하시오. (   )",
                answer: "빛;발신자-송신기-광섬유-수신기-수신자", 
                options: [
                    "전기;과정1-과정2-과정3", 
                    "소리;과정A-과정B-과정C",
                    "빛;발신자-송신기-광섬유-수신기-수신자",
                    "정보;단계X-단계Y-단계Z"
                ],
                explanation: "광섬유는 빛 신호를 이용하여 정보를 전송하는 가느다란 유리 또는 플라스틱 섬유입니다. 광통신은 발신자의 정보(음성, 데이터 등)를 송신기에서 빛 신호로 변환하여 광섬유를 통해 전송하고, 수신기에서 이 빛 신호를 다시 원래 정보로 변환하여 수신자에게 전달하는 과정입니다."
            },
            {
                id: 20, type: 'fill-in', text: "20. 광섬유를 이용하여 에너지 손실이 (   ) 상태로 먼 곳까지 빛을 보낼 수 있다.",
                answer: "적은", options: ["많은", "없는", "적은", "일정한"],
                explanation: "광섬유는 빛의 전반사 현상을 이용하여 빛 신호를 전달하므로, 일반적인 구리선에 비해 에너지 손실이 매우 적어 장거리 정보통신에 유리합니다."
            },
            {
                id: 21, type: 'fill-in', text: "21. 코어 내에서 빛이 (   )되어 흐려지는 문제가 있어 광섬유 중간에 (   )를 사용하여 빛을 증폭한다.",
                answer: "흡수;광 증폭기", options: ["반사;반사판", "산란;렌즈", "흡수;광 증폭기", "굴절;프리즘"],
                explanation: "광섬유를 통해 빛 신호가 먼 거리를 진행하다 보면 코어 물질에 의한 빛의 흡수나 산란 등으로 인해 신호가 약해질 수 있습니다. 이를 보완하기 위해 광섬유 중간중간에 광 증폭기를 설치하여 약해진 빛 신호를 다시 증폭시킵니다."
            },
            {
                id: 22, type: 'fill-in', text: "22. 광섬유의 대표적인 예는 (   )이다.",
                answer: "내시경", options: ["망원경", "현미경", "돋보기", "내시경"],
                explanation: "광섬유는 의료 분야에서 인체 내부를 관찰하는 내시경이나, 통신 분야에서 인터넷 데이터 전송 등에 널리 활용됩니다."
            },
            {
                id: 23, type: 'fill-in', text: "23. 코어의 굴절률이 클래딩의 굴절률보다 (   ) 때문에 빛은 코어 내부에서 전반사한다.",
                answer: "크기", options: ["작기", "같기", "크기", "매우 작기"],
                explanation: "광섬유는 중심부의 코어와 이를 감싸는 클래딩으로 구성되며, 코어의 굴절률이 클래딩의 굴절률보다 커야 합니다. 그래야 빛이 코어에서 클래딩으로 진행할 때 임계각보다 큰 각도로 입사하면 전반사가 일어나 코어 내부를 따라 진행할 수 있습니다."
            },
            {
                id: 24, type: 'fill-in', text: "24. (   )은 빛 속에 정보를 담아 광섬유를 통해 주고 받는 통신 방식이다.",
                answer: "광통신", options: ["전기통신", "무선통신", "위성통신", "광통신"],
                explanation: "광통신은 음성, 영상, 데이터 등의 정보를 빛 신호로 변환하여 광섬유를 매체로 하여 전송하는 통신 방식입니다."
            },
            {
                id: 25, type: 'fill-in', text: "25. 광통신은 디지털 전기 신호를 (   )신호로 변환한다.",
                answer: "빛", options: ["소리", "전파", "빛", "자기"],
                explanation: "광통신 시스템에서 송신기는 전달하려는 정보(디지털 전기 신호 형태)를 레이저나 LED를 이용하여 빛 신호로 변환하여 광섬유로 보냅니다."
            },
            {
                id: 26, type: 'fill-in', text: "26. 우리 눈으로 볼 수 있는 빛인 (   )은 380nm~750nm이다.",
                answer: "가시광선", options: ["자외선", "적외선", "X선", "가시광선"],
                explanation: "가시광선은 전자기파 스펙트럼 중에서 사람의 눈으로 볼 수 있는 영역의 빛을 말하며, 파장 범위는 대략 380nm(보라색)에서 750nm(빨간색) 사이입니다."
            },
            {
                id: 27, type: 'fill-in', text: "27. <감마선, 가시광선, 적외선, 마이크로파, 자외선, 라디오파, X선>을 진동수가 큰 순서대로 나열하시오. (   )",
                answer: "감마선, X선, 자외선, 가시광선, 적외선, 마이크로파, 라디오파", 
                options: [
                    "라디오파, 마이크로파, 적외선, 가시광선, 자외선, X선, 감마선",
                    "감마선, X선, 자외선, 가시광선, 적외선, 마이크로파, 라디오파",
                    "가시광선, 자외선, 적외선, X선, 감마선, 마이크로파, 라디오파",
                    "마이크로파, 라디오파, 적외선, 가시광선, 자외선, 감마선, X선"
                ],
                explanation: "전자기파는 진동수가 클수록(파장이 짧을수록) 에너지가 큽니다. 진동수가 큰 순서대로 나열하면 감마선 > X선 > 자외선 > 가시광선 > 적외선 > 마이크로파 > 라디오파 순입니다."
            },
            {
                id: 28, type: 'fill-in', text: "28. 파장이 길면 진동수는 (   )",
                answer: "작다", options: ["크다", "작다", "변함없다", "0이다"],
                explanation: "빛의 속력은 일정하므로(c = fλ), 파장(λ)과 진동수(f)는 반비례 관계입니다. 따라서 파장이 길면 진동수는 작아집니다."
            },
            {
                id: 29, type: 'fill-in', text: "29. (   )은 자외선보다 더 짧은 전자기파로 에너지가 매우 커서 많은 물질을 통과하고 의료기기에 많이 사용된다.",
                answer: "X선", options: ["감마선", "적외선", "마이크로파", "X선"],
                explanation: "X선은 자외선보다 파장이 짧고 진동수가 커서 에너지가 매우 강합니다. 이 투과력을 이용하여 의료 분야에서 인체 내부를 촬영하는 데 널리 사용됩니다."
            },
            {
                id: 30, type: 'fill-in', text: "30. (   )은 X선보다 파장이 짧으며 전자기파 중에서 에너지가 가장 크다. 주로 핵반응 과정에서 방출된다.",
                answer: "감마선", options: ["자외선", "감마선", "가시광선", "라디오파"],
                explanation: "감마선은 전자기파 중에서 파장이 가장 짧고 진동수가 가장 커서 에너지가 가장 강력합니다. 주로 원자핵이 붕괴하거나 핵반응이 일어날 때 방출됩니다."
            },
            {
                id: 31, type: 'fill-in', text: "31. (   )는 파장이 1mm~1m정도까지의 전자기파로 전자레인지나 통신에 사용된다.",
                answer: "마이크로파", options: ["적외선", "라디오파", "자외선", "마이크로파"],
                explanation: "마이크로파는 파장이 대략 1mm에서 1m 사이인 전자기파로, 음식물을 데우는 전자레인지, 위성 통신, 레이더, Wi-Fi 등 다양한 통신 분야에 활용됩니다."
            },
            {
                id: 32, type: 'fill-in', text: "32. (   )는 텔레비전이나 라디오에 쓰인다.",
                answer: "라디오파", options: ["마이크로파", "적외선", "라디오파", "X선"],
                explanation: "라디오파는 전자기파 중에서 파장이 가장 긴 영역으로, 라디오 방송, 텔레비전 방송, 무선 통신 등에 널리 사용됩니다."
            },
            {
                id: 33, type: 'fill-in', text: "33. (   )은 가시광선이나 자외선에 비해 강한 열작용을 하기 때문에 열선이라고도 한다. 텔레비전 리모컨이나 공항에서 사용하는 열화상 사진기 등에 이용된다.",
                answer: "적외선", options: ["자외선", "적외선", "마이크로파", "감마선"],
                explanation: "적외선은 가시광선의 빨간색 빛보다 파장이 길며, 강한 열작용을 하여 '열선'이라고도 불립니다. 물체에서 방출되는 적외선을 감지하여 온도를 측정하는 열화상 카메라, 난방기, TV 리모컨 등에 사용됩니다."
            },
            {
                id: 34, type: 'fill-in', text: "34. 햇빛에 오래 노출되면 피부가 타는데 이는 햇빛 속에 포함된 (   ) 때문이다. 이는 형광등에도 이용된다.",
                answer: "자외선", options: ["적외선", "가시광선", "X선", "자외선"],
                explanation: "자외선은 가시광선의 보라색 빛보다 파장이 짧고 에너지가 커서 피부를 태우거나 살균 작용을 합니다. 또한 형광등 내부의 수은 증기에서 방출된 자외선이 형광물질을 자극하여 가시광선을 내게 하는 원리에도 이용됩니다."
            },
            {
                id: 35, type: 'fill-in', text: "35. 서로 반대 방향으로 진행하는 2개의 파동이 만나면 중첩되는 동안에는 파형이 (   ) 중첩이 끝나면 다시 원래의 모양으로 진행된다.",
                answer: "변하지만", options: ["사라지고", "합쳐지고", "변하지만", "그대로이고"],
                explanation: "파동의 중첩 원리에 따르면, 두 개 이상의 파동이 만나면 각 파동의 변위를 합한 만큼 합성파의 변위가 나타나 파형이 변하지만, 중첩 영역을 지나면 각 파동은 원래의 모양과 진행 방향을 그대로 유지하며 독립적으로 진행합니다."
            },
            {
                id: 36, type: 'fill-in', text: "36. 두 파동이 중첩될 때 서로 다른 파동에 아무런 영향을 주지 않고 본래 파동의 모양을 그대로 유지하면서 진행하는 것을 (   )이라고 한다.",
                answer: "파동의 독립성", options: ["파동의 간섭", "파동의 회절", "파동의 중첩", "파동의 독립성"],
                explanation: "파동의 독립성은 여러 파동이 같은 공간에서 만나 중첩되더라도 서로에게 영향을 주지 않고, 중첩 후에는 각각 원래의 성질(모양, 속도 등)을 유지하며 진행하는 파동의 중요한 성질입니다."
            },
            {
                id: 37, type: 'fill-in', text: "37. 두 파동의 변위의 방향이 같으면 서로 보강되어 합성 파동의 변위가 (   ), 변위의 방향이 반대면 서로 (   )되어 합성 파동의 변위가 (   )",
                answer: "커지고;상쇄;작아진다", options: ["작아지고;보강;커진다", "커지고;상쇄;작아진다", "변함없고;중첩;그대로이다", "커지고;간섭;사라진다"],
                explanation: "파동의 중첩 원리에 따라, 같은 위상(변위 방향이 같음)으로 만난 파동들은 변위가 더해져 진폭이 커지는 보강 간섭을 하고, 반대 위상(변위 방향이 반대)으로 만난 파동들은 변위가 상쇄되어 진폭이 작아지는 상쇄 간섭을 합니다."
            },
            {
                id: 38, type: 'fill-in', text: "38. 37번의 내용과 같은 성질을 (   ) 원리라고 한다.",
                answer: "중첩", options: ["독립성", "회절", "반사", "중첩"],
                explanation: "여러 파동이 한 지점에서 만날 때 합성파의 변위가 각 파동의 변위의 합과 같아지는 원리를 파동의 중첩 원리라고 합니다."
            },
            {
                id: 39, type: 'fill-in', text: "39. 같은 모양의 파동이 만나면 진폭이 (   )",
                answer: "커진다", options: ["작아진다", "변하지 않는다", "커진다", "0이 된다"],
                explanation: "같은 모양(위상)의 파동이 만나 중첩되면 보강 간섭이 일어나 합성파의 진폭이 각 파동의 진폭의 합만큼 커집니다."
            },
            {
                id: 40, type: 'fill-in', text: "40. 반대 모양의 파동이 만나면 진폭이 (   )",
                answer: "작아진다", options: ["커진다", "변하지 않는다", "0이 된다", "작아진다"],
                explanation: "반대 모양(위상)의 파동이 만나 중첩되면 상쇄 간섭이 일어나 합성파의 진폭이 각 파동의 진폭의 차만큼 작아집니다. 만약 두 파동의 진폭이 같다면 진폭이 0이 될 수도 있습니다."
            },
            {
                id: 41, type: 'fill-in', text: "41. (두 개 이상의 파동이 중첩되어 진폭이 커지거나 작아지는) 현상을 (   ) 이라고 한다.", 
                answer: "파동의 간섭", options: ["파동의 회절", "파동의 반사", "파동의 굴절", "파동의 간섭"],
                explanation: "파동의 간섭은 두 개 이상의 파동이 한 점에서 만나 중첩될 때, 합성파의 진폭이 원래 파동들의 진폭보다 커지거나(보강 간섭) 작아지는(상쇄 간섭) 현상을 말합니다. (PDF 25,26번은 전자기파 종류 문제로, 41번은 간섭에 대한 설명이므로 수정)"
            },
            {
                id: 42, type: 'fill-in', text: "42. 골-골, 마루-마루가 만나 파동이 중첩된 파동은 진폭이 커지는데 이를 (   )이라고 한다.",
                answer: "보강간섭", options: ["상쇄간섭", "회절", "보강간섭", "굴절"],
                explanation: "두 파동의 마루와 마루, 또는 골과 골이 만나 같은 위상으로 중첩되면 합성파의 진폭이 커지는 현상을 보강 간섭이라고 합니다."
            },
            {
                id: 43, type: 'fill-in', text: "43. 골-마루가 만나 파동이 중첩된 파동은 진폭이 작아지는데 이를 (   )이라고 한다.",
                answer: "상쇄간섭", options: ["보강간섭", "회절", "반사", "상쇄간섭"],
                explanation: "한 파동의 마루와 다른 파동의 골이 만나 반대 위상으로 중첩되면 합성파의 진폭이 작아지는 현상을 상쇄 간섭이라고 합니다."
            },
            {
                id: 44, type: 'fill-in', text: "44. 두 스피커로부터 같은 거리만큼 떨어진 지점에서는 양쪽에서 오는 파동이 항상 같은 위상으로 만나게 되는데 이를 (   )이라고 한다.",
                answer: "보강간섭", options: ["상쇄간섭", "정상파", "보강간섭", "맥놀이"],
                explanation: "같은 위상으로 진동하는 두 스피커에서 나온 소리가 같은 거리를 이동하여 한 지점에서 만나면, 두 파동은 같은 위상으로 중첩되어 소리가 커지는 보강 간섭이 일어납니다."
            },
            {
                id: 45, type: 'fill-in', text: "45. 보강간섭이 일어나면 한쪽 스피커에서 나오는 소리보다 더 (   )소리를 들을 수 있다.",
                answer: "큰", options: ["작은", "같은", "높은", "큰"],
                explanation: "보강 간섭이 일어나는 지점에서는 합성파의 진폭이 커지므로, 소리의 경우 더 큰 소리를 들을 수 있습니다."
            },
            {
                id: 46, type: 'fill-in', text: "46. 두 스피커에서 나오는 파동이 반대모양으로 만나는 지점에 이르면 (   )을 일으켜 소리가 (   )",
                answer: "상쇄간섭;작아진다", options: ["보강간섭;커진다", "회절;퍼진다", "상쇄간섭;작아진다", "반사;되돌아온다"],
                explanation: "두 스피커에서 나온 파동이 경로차가 파장의 반정수배가 되어 반대 위상으로 만나는 지점에서는 상쇄 간섭이 일어나 소리가 작아지거나 거의 들리지 않게 됩니다."
            },
            {
                id: 47, type: 'fill-in', text: "47. 진동수가 (   ) 중앙에 가까운 지점에서 상쇄간섭이 일어난다.",
                answer: "클수록", options: ["작을수록", "일정할수록", "클수록", "관계없이"],
                explanation: "두 스피커 사이의 간섭 무늬에서, 진동수가 클수록(파장이 짧을수록) 보강 간섭과 상쇄 간섭이 일어나는 지점들 사이의 간격이 좁아집니다. 따라서 중앙의 보강 지점에서 첫 번째 상쇄 지점까지의 거리가 짧아져, 중앙에 더 가까운 지점에서 상쇄 간섭이 일어나게 됩니다."
            },
            {
                id: 48, type: 'fill-in', text: "48. 노이즈캔슬링은 (   )의 대표적인 예이다.",
                answer: "상쇄간섭", options: ["보강간섭", "회절", "도플러 효과", "상쇄간섭"],
                explanation: "노이즈 캔슬링 기술은 외부 소음과 반대 위상의 소리를 발생시켜 소음을 상쇄 간섭시켜 줄이는 원리를 이용합니다."
            },
            {
                id: 49, type: 'fill-in', text: "49. 비오는 날 물 위의 기름띠에서 볼 수 있는 알록달록한 색이나 비누 막에서 관찰할 수 있는 무지갯빛 모두 (   )이다.",
                answer: "간섭현상", options: ["회절현상", "분산현상", "간섭현상", "편광현상"],
                explanation: "얇은 막(기름띠, 비눗방울 막 등)의 위아래 표면에서 반사된 빛들이 서로 간섭하여 특정 파장의 빛은 보강되고 다른 파장의 빛은 상쇄되어 여러 가지 색깔이 보이는 현상입니다. 이를 '얇은 막 간섭'이라고 합니다."
            },
            {
                id: 50, type: 'fill-in', text: "50. 얇은 막의 위쪽과 아래쪽에서 반사하는 두 빛이 만드는 (   )에 의해 나타난다.",
                answer: "간섭현상", options: ["회절현상", "분산현상", "간섭현상", "편광현상"],
                explanation: "얇은 막에서 빛이 반사될 때, 막의 윗면에서 반사된 빛과 아랫면에서 반사된 빛이 경로차와 위상 변화로 인해 서로 간섭하여 특정 색깔이 더 밝게 보이거나 어둡게 보이는 현상입니다."
            },
            {
                id: 51, type: 'fill-in', text: "51. 우주에서 오는 전파 중 가시광선보다 파장이 (   ) 전파를 측정하기 위해 망원경을 (   ) 만들어야 한다.",
                answer: "긴;크게", options: ["짧은;작게", "긴;크게", "같은;정밀하게", "짧은;단순하게"],
                explanation: "전파 망원경의 분해능(두 물체를 구분하는 능력)은 파장에 비례하고 망원경의 구경(크기)에 반비례합니다. 따라서 파장이 긴 전파를 관측하여 좋은 분해능을 얻기 위해서는 망원경의 구경을 매우 크게 만들어야 합니다."
            },
            {
                id: 52, type: 'fill-in', text: "52. 무반사 코팅을 한 렌즈는 눈이 (   ) 보인다.",
                answer: "선명하게", options: ["흐릿하게", "작게", "크게", "선명하게"],
                explanation: "안경 렌즈나 카메라 렌즈 표면에 무반사 코팅을 하면, 특정 파장의 빛이 렌즈 표면에서 반사되는 것을 줄여 빛의 투과율을 높입니다. 이로 인해 상이 더 밝고 선명하게 보이며, 반사로 인한 잡광도 줄어듭니다."
            },
            {
                id: 53, type: 'fill-in', text: "53. 무반사 코팅을 하지 않은 렌즈는 외부의 빛이 (   )되어 보인다.",
                answer: "반사", options: ["굴절", "흡수", "산란", "반사"],
                explanation: "무반사 코팅이 되어 있지 않은 렌즈 표면에서는 외부의 빛이 일부 반사되어 눈부심을 유발하거나 상의 선명도를 떨어뜨릴 수 있습니다."
            }
        ];

        // 명언 목록
        const motivationalQuotes = [
            "오늘의 노력이 내일의 너를 만든다.", "포기하지 않는 한, 실패는 없다.", "가장 큰 위험은 아무 위험도 감수하지 않는 것이다.",
            "배움은 의무도, 생존도 아니다. 그것은 우리의 가장 큰 특권이다.", "성공은 최종 목적지가 아니며, 실패는 치명적이지 않다. 중요한 것은 계속 나아가는 용기다.",
            "작은 성공들이 모여 큰 성공을 이룬다.", "어제보다 나은 오늘, 오늘보다 나은 내일을 만들자.",
            "가장 큰 영광은 한 번도 실패하지 않음이 아니라 실패할 때마다 다시 일어서는 데에 있다.", "천리길도 한 걸음부터.", "노력은 결코 배신하지 않는다."
        ];

        const quizElement = document.getElementById('quiz');
        const paginationControlsElement = document.getElementById('pagination-controls');
        const submitPageButton = document.getElementById('submit-page-btn');
        const scoreSectionElement = document.getElementById('score-section');
        const currentPageScoreTextElement = document.getElementById('current-page-score-text');
        const totalScoreTextElement = document.getElementById('total-score-text');
        const pageInfoElement = document.getElementById('page-info');
        const quizMainTitleDisplayElement = document.getElementById('quiz-main-title-in-score');
        const motivationalQuoteElement = document.getElementById('motivational-quote'); 
        
        const welcomePopup = document.getElementById('welcome-popup');
        const popupPasswordInput = document.getElementById('popup-password');
        const popupConfirmButton = document.getElementById('popup-confirm');
        const popupErrorMessage = document.getElementById('popup-error');

        const correctPassword = "0407"; 

        const questionsPerPage = 10; 
        let currentPage = 0;
        let pageScores = []; 
        let pageAttempted = []; 

        function initializeQuizData() {
            questions.forEach(q => {
                q.userAnswer = null;
                q.isCorrect = null;
                q.attemptedThisSession = false; 
                if (q.answer && q.answer.includes(';')) {
                    q.answersArray = q.answer.split(';');
                } else if (q.answer) {
                    q.answersArray = [q.answer];
                } else {
                    q.answersArray = [];
                }
            });
            const numPages = Math.ceil(questions.length / questionsPerPage);
            pageAttempted = new Array(numPages).fill(false);
            pageScores = new Array(numPages).fill(0);
        }


        function renderQuestionsForPage(page) {
            quizElement.innerHTML = ''; 
            currentPage = page;

            const start = page * questionsPerPage;
            const end = Math.min(start + questionsPerPage, questions.length);
            const questionsOnPage = questions.slice(start, end);

            pageInfoElement.textContent = `총 ${questions.length}문제 중 ${start + 1} - ${end}번 문제`;


            questionsOnPage.forEach((q, indexOnPage) => {
                const questionCard = document.createElement('div');
                questionCard.classList.add('question-card');
                questionCard.id = `question-${q.id}`;

                const questionText = document.createElement('p');
                questionText.classList.add('question-text');
                let questionHTML = q.text;
                if (q.answersArray && q.answersArray.length > 1) { 
                    let blankCount = 0;
                    questionHTML = q.text.replace(/(\(\s*(?:[^)]*)\s*\))/g, (match) => {
                        blankCount++;
                        return `<span class="blank-emphasis">( ${"&nbsp;&nbsp;&nbsp;".repeat(q.answersArray[blankCount-1] ? q.answersArray[blankCount-1].length/2 +1 : 3)} )</span>`;
                    });
                } else { 
                     questionHTML = q.text.replace(/(\(\s*(?:[^)]*)\s*\))/g, '<span class="blank-emphasis">( &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )</span>');
                }
                questionText.innerHTML = questionHTML; 
                questionCard.appendChild(questionText);

                const optionsContainer = document.createElement('div');
                optionsContainer.classList.add('options');

                q.options.forEach(option => {
                    const optionId = `q${String(q.id).replace(/[^a-zA-Z0-9]/g, '')}-option-${option.replace(/[^a-zA-Z0-9ㄱ-ㅎㅏ-ㅣ가-힣$]/g, '')}`;
                    
                    const radioInput = document.createElement('input');
                    radioInput.type = 'radio';
                    radioInput.id = optionId;
                    radioInput.name = `question-${q.id}`; 
                    radioInput.value = option; 
                    radioInput.classList.add('option-input', 'hidden');
                    if (q.userAnswer === option) radioInput.checked = true; 
                    if (pageAttempted[currentPage]) radioInput.disabled = true;

                    const optionLabel = document.createElement('label');
                    optionLabel.htmlFor = optionId;
                    optionLabel.innerHTML = option.includes(';') ? option.split(';').join(', ') : option; 
                    optionLabel.classList.add('option-label');
                    if (pageAttempted[currentPage]) optionLabel.classList.add('opacity-70', 'cursor-not-allowed');

                    optionsContainer.appendChild(radioInput);
                    optionsContainer.appendChild(optionLabel);
                });
                questionCard.appendChild(optionsContainer);

                const feedbackElement = document.createElement('div');
                feedbackElement.classList.add('feedback');
                feedbackElement.style.display = 'none'; 
                questionCard.appendChild(feedbackElement);
                
                if (pageAttempted[currentPage] && q.attemptedThisSession) {
                    showFeedbackForQuestion(q, questionCard);
                }
                quizElement.appendChild(questionCard);
            });
            
            const numPages = Math.ceil(questions.length / questionsPerPage);
            if (numPages > 1) {
                paginationControlsElement.style.display = 'flex';
                renderPaginationControls();
            } else {
                paginationControlsElement.style.display = 'none';
            }


            submitPageButton.disabled = pageAttempted[currentPage];
            if (pageAttempted[currentPage]) {
                submitPageButton.textContent = '채점 완료';
                scoreSectionElement.style.display = 'block'; 
                updateScoreDisplay(); 
                showMotivationalQuote(); 
            } else {
                submitPageButton.textContent = '이번 페이지 채점하기'; 
                motivationalQuoteElement.style.display = 'none'; 
                if (questionsOnPage.length > 0) { 
                     scoreSectionElement.style.display = 'none';
                } else { 
                     scoreSectionElement.style.display = 'block';
                     currentPageScoreTextElement.textContent = '이번 페이지에 문제가 없습니다.';
                     totalScoreTextElement.textContent = '';
                }
            }
        }
        
        function showFeedbackForQuestion(question, questionCard) {
            const feedbackElement = questionCard.querySelector('.feedback');
            if (!feedbackElement) return;

            feedbackElement.innerHTML = ''; 
            const correctAnswerText = question.answersArray.join(', ');

            if (question.isCorrect) {
                feedbackElement.innerHTML = '<strong class="font-semibold">정답입니다!</strong> 🎉';
                feedbackElement.className = 'feedback correct';
            } else {
                feedbackElement.innerHTML = `<strong class="font-semibold">오답입니다.</strong> 정답은 "<span class="font-bold text-red-700">${correctAnswerText}</span>"입니다.`;
                feedbackElement.className = 'feedback incorrect';
            }

            const explanationElement = document.createElement('p');
            explanationElement.classList.add('explanation');
            explanationElement.innerHTML = `<strong class="font-semibold">해설:</strong> ${question.explanation}`; 
            feedbackElement.appendChild(explanationElement);
            feedbackElement.style.display = 'block';
        }

        function renderPaginationControls() {
            paginationControlsElement.innerHTML = '';
            const numPages = Math.ceil(questions.length / questionsPerPage);

            const prevButton = document.createElement('button');
            prevButton.textContent = '이전';
            prevButton.disabled = currentPage === 0;
            prevButton.onclick = () => renderQuestionsForPage(currentPage - 1);
            paginationControlsElement.appendChild(prevButton);

            for (let i = 0; i < numPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.textContent = i + 1;
                pageButton.classList.add('page-number');
                if (i === currentPage) {
                    pageButton.classList.add('current');
                }
                pageButton.onclick = () => renderQuestionsForPage(i);
                paginationControlsElement.appendChild(pageButton);
            }

            const nextButton = document.createElement('button');
            nextButton.textContent = '다음';
            nextButton.disabled = currentPage === numPages - 1;
            nextButton.onclick = () => renderQuestionsForPage(currentPage + 1);
            paginationControlsElement.appendChild(nextButton);
        }

        function showMotivationalQuote() {
            const randomIndex = Math.floor(Math.random() * motivationalQuotes.length);
            motivationalQuoteElement.textContent = motivationalQuotes[randomIndex];
            motivationalQuoteElement.style.display = 'block';
        }

        submitPageButton.addEventListener('click', () => {
            if (pageAttempted[currentPage]) return; 

            let scoreForThisPage = 0;
            
            const start = currentPage * questionsPerPage;
            const end = Math.min(start + questionsPerPage, questions.length);
            const questionsOnPage = questions.slice(start, end);

            questionsOnPage.forEach((q, indexOnPage) => {
                const questionCard = quizElement.children[indexOnPage]; 
                const selectedOptionInput = questionCard.querySelector(`input[name="question-${q.id}"]:checked`);
                
                q.attemptedThisSession = true;

                if (selectedOptionInput) {
                    q.userAnswer = selectedOptionInput.value; 
                    q.isCorrect = (q.userAnswer === q.answer); 
                                        
                    if (q.isCorrect) {
                        scoreForThisPage++; 
                    }
                    showFeedbackForQuestion(q, questionCard);

                    const radioInputs = questionCard.querySelectorAll('input[type="radio"]');
                    radioInputs.forEach(input => input.disabled = true);
                } else {
                    const feedbackElement = questionCard.querySelector('.feedback');
                    feedbackElement.textContent = '답을 선택하지 않았습니다.';
                    feedbackElement.className = 'feedback incorrect';
                    feedbackElement.style.display = 'block';
                    q.isCorrect = false; 
                }
            });
            
            pageScores[currentPage] = scoreForThisPage;
            pageAttempted[currentPage] = true;
            submitPageButton.disabled = true;
            submitPageButton.textContent = '채점 완료';
            
            scoreSectionElement.style.display = 'block';
            updateScoreDisplay();
            showMotivationalQuote(); 

            const quizContainerElement = document.querySelector('.quiz-container');
            if (quizContainerElement) {
                quizContainerElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });

        function updateScoreDisplay() {
            const questionsOnThisPageCount = Math.min(questionsPerPage, questions.length - (currentPage * questionsPerPage)); 
            currentPageScoreTextElement.textContent = `이번 페이지 점수: ${pageScores[currentPage]} / ${questionsOnThisPageCount}`;
            
            let currentTotalScore = 0;
            let currentTotalAttemptedQuestions = 0;
            for(let i=0; i < pageAttempted.length; i++){
                if(pageAttempted[i]){
                    const start = i * questionsPerPage;
                    const end = Math.min(start + questionsPerPage, questions.length);
                    currentTotalAttemptedQuestions += (end-start);
                    currentTotalScore += pageScores[i];
                }
            }

            const quizTitleElement = document.querySelector('h1'); 
            let quizMainTitle = "현재 단원";
            if (quizTitleElement) {
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = quizTitleElement.innerHTML; 
                quizMainTitle = tempDiv.textContent || tempDiv.innerText || "";
                const titleParts = quizMainTitle.split('(');
                if (titleParts.length > 0) {
                    quizMainTitle = titleParts[0].trim();
                }
            }
            
            if (quizMainTitleDisplayElement) { 
                quizMainTitleDisplayElement.textContent = quizMainTitle;
            }

            if (currentTotalAttemptedQuestions > 0) {
                 totalScoreTextElement.style.display = 'block'; 
                 totalScoreTextElement.textContent = `총 누적 점수: ${currentTotalScore} / ${currentTotalAttemptedQuestions}`;
            } else {
                 totalScoreTextElement.style.display = 'none'; 
            }
        }
        
        // 팝업 기능
        window.onload = () => {
            if (welcomePopup) {
                // 각 퀴즈 페이지마다 고유한 sessionStorage 키 사용
                const popupSessionKey = 'appiaQuizPasswordEntered_physics_waves_1_53'; 
                const popupShownThisSession = sessionStorage.getItem(popupSessionKey); 
                if (!popupShownThisSession) { 
                    welcomePopup.classList.add('show');
                } else {
                    initializeQuizData();
                    renderQuestionsForPage(0);
                }
            } else { 
                initializeQuizData();
                renderQuestionsForPage(0);
            }
        };

        if (popupConfirmButton) {
            popupConfirmButton.addEventListener('click', () => {
                if (popupPasswordInput.value === correctPassword) {
                    if (welcomePopup) {
                        welcomePopup.classList.remove('show');
                    }
                    const popupSessionKey = 'appiaQuizPasswordEntered_physics_waves_1_53';
                    sessionStorage.setItem(popupSessionKey, 'true'); 
                    initializeQuizData(); 
                    renderQuestionsForPage(0);
                } else {
                    if (popupErrorMessage) {
                        popupErrorMessage.textContent = "비밀번호가 틀렸습니다. 다시 시도해주세요.";
                    }
                    popupPasswordInput.value = ''; 
                    popupPasswordInput.focus(); 
                }
            });
        }
        
        if (popupPasswordInput) {
            popupPasswordInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault(); 
                    popupConfirmButton.click();
                }
            });
        }

    </script>
</body>
</html>
